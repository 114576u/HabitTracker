{% extends 'base.html' %}
{% block content %}
  <h2 class="subtitle">Reports</h2>
  <div class="card">
    <div class="row wrap">
      <label>Period</label>
      <select id="repPeriod">
        <option value="week">Week</option>
        <option value="month">Month</option>
        <option value="year">Year</option>
      </select>
      <label>Start date</label>
      <input id="repStart" type="date">
      <label>Sort by</label>
      <select id="repSort">
        <option value="date">Date</option>
        <option value="habit">Habit</option>
        <option value="rating">Rating</option>
      </select>
      <label>Filter by tag</label>
      <input id="repTag" type="text" placeholder="(optional)">
      <button class="btn primary" onclick="runReport()">Run</button>
      <button class="btn secondary" onclick="exportCSV()">Export CSV</button>
    </div>
  </div>

  <div id="repMeta" class="mt muted"></div>

  <div class="mt">
    <h3 class="subtitle">Habit Summary (<span id="goalsMonth"></span>)</h3>
    <table id="habitTable">
      <thead>
        <tr>
          <th>Habit</th>
          <th>Kind</th>
          <th>Goal</th>
          <th>Done (month)</th>
          <th>Progress</th>
          <th>Days done</th>
          <th>Total (numeric)</th>
          <th>Unit</th>
          <th>Current streak</th>
          <th>Best streak</th>
          <th>Tags</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>


  <div class="mt">
    <h3 class="subtitle">Journal Entries</h3>
    <table id="repTable">
      <thead>
        <tr>
          <th>Type</th>
          <th>Date</th>
          <th>Habit / Title</th>
          <th>Kind</th>
          <th>Done</th>
          <th>Rating</th>
          <th>Tags</th>
          <th>Link</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <link rel="stylesheet" href="{{ url_for('static', filename='reports.css') }}">
  <script src="{{ url_for('static', filename='reports.js') }}"></script>
  <script>initReports();</script>
{% endblock %}
