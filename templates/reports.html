{% extends 'base.html' %}
{% block content %}
  <h2 class="subtitle">Reports</h2>
  <div class="card">
    <div class="row wrap">
      <label>Period</label>
      <select id="repPeriod">
        <option value="week">Week</option>
        <option value="month">Month</option>
        <option value="year">Year</option>
      </select>
      <label>Start date</label>
      <input id="repStart" type="date">
      <label>Sort by</label>
      <select id="repSort">
        <option value="date">Date</option>
        <option value="habit">Habit</option>
        <option value="category">Category</option>
        <option value="rating">Rating</option>
      </select>
      <label>Filter by tag</label>
      <input id="repTag" type="text" placeholder="(optional)">
      <button class="btn primary" onclick="runReport()">Run</button>
    </div>
  </div>

  <div id="repMeta" class="mt muted"></div>

  <div class="mt">
    <h3 class="subtitle">Monthly goals (<span id="goalsMonth"></span>)</h3>
    <table id="goalsTable">
      <thead><tr><th>Habit</th><th>Goal</th><th>Done</th><th>Progress</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="mt">
    <h3 class="subtitle">Summary & Streaks</h3>
    <table id="summaryTable">
      <thead><tr><th>Habit</th><th>Kind</th><th>Days done</th><th>Total (numeric)</th><th>Unit</th><th>Current streak</th><th>Best streak</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="mt">
    <table id="repTable">
      <thead>
        <tr>
          <th>Type</th>
          <th>Date</th>
          <th>Habit / Title</th>
          <th>Kind / Category</th>
          <th>Done</th>
          <th>Time (min)</th>
          <th>Distance (km)</th>
          <th>Rating</th>
          <th>Tags</th>
          <th>Link</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script src="{{ url_for('static', filename='reports.js') }}"></script>
  <script>initReports();</script>
{% endblock %}
