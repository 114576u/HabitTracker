{% extends "base.html" %}

{% block content %}
<h2>Manage Habits</h2>

<!-- Create Habit Form (handled by JS, no form POST) -->
<div class="card mb">
  <h4>Create a new habit</h4>

  <div class="form-row">
    <input id="hName" type="text" placeholder="Habit name" required>
    <input id="hTags" type="text" placeholder="Tags (comma separated)">
    <input id="hMonthlyGoal" type="number" placeholder="Monthly goal (optional)">
  </div>

  <div class="form-row">
    <label for="hColor">Choose a color for this habit:</label>
    <input id="hColor" type="color" value="#8c88fc" style="height: 2.2rem;">
  </div>


  <div id="hNumeric" style="display:none; margin-top: 1rem; text-align: right;">
    <div class="form-row">
      <input id="hUnit" type="text" placeholder="Unit (e.g., pages, L)">
      <select id="hAggregation">
        <option value="sum">Sum</option>
        <option value="avg">Average</option>
        <option value="max">Max</option>
        <option value="min">Min</option>
      </select>
      <input id="hDailyGoal" type="number" step="any" placeholder="Daily goal (optional)">
      <label>
        <input type="checkbox" id="hAllowMulti">
        Allow multiple entries per day
      </label>
    </div>
  </div>



  <div class="habit-type-select">
    <label class="habit-type-card">
      <input type="radio" name="hKind" value="checkbox" checked>
      <div class="habit-type-content">
        <strong>Checkbox</strong>
        <p>Simple yes/no habit (e.g., Take medicine, Meditate)</p>
      </div>
    </label>

    <label class="habit-type-card">
      <input type="radio" name="hKind" value="metrics">
      <div class="habit-type-content">
        <strong>Metrics</strong>
        <p>Track time and distance (e.g., Run 5 km in 30 min)</p>
      </div>
    </label>

    <label class="habit-type-card">
      <input type="radio" name="hKind" value="numeric">
      <div class="habit-type-content">
        <strong>Numeric</strong>
        <p>Track value + unit (e.g., Read 50 pages, Drink 2L)</p>
      </div>
    </label>
  </div>

  <div class="form-row right" style="margin-top: 1rem;">
    <button id="btnCreateHabit" class="btn action">Create habit</button>
  </div>
</div>



<!-- Existing Habits -->
{% if habits %}
<h4>Your habits</h4>
<div class="habit-list" id="habit-list">
  {% for habit in habits %}
  <div class="card habit-card">
    {% include '_habit_card.html' %}
  </div>
  {% endfor %}
</div>
{% else %}
<div id="habit-list"></div>
<p>No habits yet. Start by creating one above!</p>
{% endif %}

<script src="{{ url_for('static', filename='habits.js') }}"></script>


<div id="confirmModal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000;">
  <div class="modal-content" style="background:white; padding:20px; max-width:400px; margin:100px auto; border-radius:8px; text-align:center;">
    <p id="confirmMessage">Are you sure you want to delete this habit?</p>
    <div style="margin-top: 20px;">
      <button id="confirmYes" class="btn btn-danger">Yes</button>
      <button id="confirmNo" class="btn btn-secondary">Cancel</button>
    </div>
  </div>
</div>



{% endblock %}
