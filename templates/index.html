{% extends 'base.html' %}
{% block content %}
  <!-- Calendar controls -->
  <section class="row mb">
    <button class="btn" onclick="shiftMonth(-1)">◀ Prev</button>
    <button class="btn" onclick="goToday()">Today</button>
    <button class="btn" onclick="shiftMonth(1)">Next ▶</button>
    <div class="spacer"></div>
    <div class="muted" id="monthLabel"></div>
  </section>

  <!-- Calendar grid -->
  <section class="calendar" id="calendar"></section>

  <!-- Habit picker + single habit card -->
  <section class="mb">
    <div class="row wrap">
      <h2 class="subtitle">Habits</h2>
      <div class="spacer"></div>
      <div class="muted">Selected day: <span id="selectedDate"></span><input id="selectedDay" type="hidden"></div>
    </div>

    <div class="card">
      <div class="row wrap">
        <select id="habitSelect" style="min-width:260px"></select>
        <button class="btn action" id="openHabitBtn">Use habit</button>
        <div class="muted">Pick a habit to set for this day. The detailed card will appear below.</div>
      </div>
    </div>

    <div id="habitCard"></div>
  </section>

  <!-- Journal -->
  <section class="mb">
    <div class="row">
      <h2 class="subtitle">Journal (movies, books, etc.)</h2>
      <div class="spacer"></div>
    </div>
    <div class="card">
      <div class="row wrap">
        <input id="entryText" type="text" placeholder="Title or notes (e.g., 'Dune: Part Two')">
        <input id="entryLink" type="text" placeholder="Link (Netflix/IMDb/Goodreads...)">
        <select id="entryCategory">
          <option value="">(category)</option>
          <option>movie</option>
          <option>series</option>
          <option>book</option>
          <option>other</option>
        </select>
        <label class="row"><input id="entryChecked" type="checkbox"> Done</label>
        <label>Rating</label>
        <select id="entryRating">
          <option value="">(none)</option>
          <option>0</option><option>1</option><option>2</option>
          <option>3</option><option>4</option><option>5</option>
        </select>
        <input id="entryTags" type="text" placeholder="tags (comma separated)">
        <button class="btn primary" onclick="addEntry()">Add</button>
      </div>
      <div id="entries" class="mt"></div>
    </div>
  </section>

  <!-- Modal for metrics/numeric -->
  <div class="modal-backdrop" id="metricsModal" onclick="closeMetrics()">
    <div class="modal" onclick="event.stopPropagation()">
      <h3 id="metricsTitle">Enter values</h3>

      <div id="metricsFields">
        <label>Time (min)</label>
        <input id="metricTime" type="number" step="1">
        <label>Distance (km)</label>
        <input id="metricDistance" type="number" step="0.01">
      </div>

      <div id="numericFields" style="display:none">
        <label id="numericLabel">Value</label>
        <input id="numericValue" type="number" step="0.01">
      </div>

      <div class="row right">
        <button class="btn" onclick="closeMetrics()">Cancel</button>
        <button class="btn primary" onclick="saveMetrics()">Save</button>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='app.js') }}"></script>
{% endblock %}
